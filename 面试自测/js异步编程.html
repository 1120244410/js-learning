<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body></body>
</html>
<script>
  function ajaxFn() {
    setTimeout(() => {
      console.log("进入异步操作了");
      i.next("迭代器-得到结果了"); // 调用 next() 解除 yield 阻塞
    }, 0);
  }

  // 这是个生成器函数
  // 使用 function* 语法编写
  // 最初调用时，不执行任何代码，而是返回这个生成器的 迭代器对象
  function* iter() {
    const str = yield ajaxFn(); // 使用 yield，使代码停在此处（交出执行权给ajaxFn）
    console.log(str); // 输出 ‘得到结果了’
  }

  const i = iter(); // 获得迭代器
  i.next(); // 启动迭代器

  // 一次next调用称作一次迭代，每次都返回一个新的Generator
  // next含有两个参数 { value, done }，value为每次迭代的值，done 为 true 时表示迭代结束，遇到return则done立即为true
</script>
